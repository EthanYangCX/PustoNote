CLC: TP312JS

- [Virtual DOM vs. real DOM](#virtual-dom-vs-real-dom)
  - ['diff' in React (vs. traditional 'diff')](#diff-in-react-vs-traditional-diff)
- [Life Cycle | 生命周期](#life-cycle--生命周期)
- [Hooks](#hooks)
- [Communication between Components | 组件间の通信](#communication-between-components--组件间の通信)
- [Myonh-De Leng](#myonh-de-leng)

# Virtual DOM vs. real DOM

## 'diff' in React (vs. traditional 'diff')

传统diff算法通过循环递归对节点进行依次对比，效率低下，算法复杂度达到 O(n^3)，react将算法进行一个优化，复杂度姜维O(n)

# Life Cycle | 生命周期

https://vue3js.cn/interview/React/life%20cycle.html

Life Cycle là Cradle-to-Grave 摇篮から坟墓へとの整个过程

流程：

- 创建阶段
    - constructor
    - getDerivedStateFromProps （创にも更にも有り）
    - render （创にも更にも有り）
    - （更新 DOM と refs）
    - componentDidMount
- 更新阶段
    - getDerivedStateFromProps （创にも更にも有り）
    - shouldComponentUpdate
    - render （创にも更にも有り）
    - getSnapshotBeforeUpdate
    - （更新 DOM と refs）
    - componentDidUpdate
- 卸载阶段
    - componentWillUnmount

# Hooks

https://vue3js.cn/interview/React/React%20Hooks.html

使得函数组件也可以有状态。

种类：

- useState
    - state声明方式：函は useState 直接获取，类は constructor 中
    - state读取方式：函は直接使用变量，类は this.state.x
    - state更新方式：函は setX 更新，类は this.setState()
    - 总的来讲，useState 更简洁，减少了this指向不明确的情况
- useEffect
    - 可以让我们在函数组件中进行一些带有副作用的操作
    - useEffect第一个参数接受一个回调函数，默认情况下，useEffect会在第一次渲染和更新之后都会执行，相当于在componentDidMount和componentDidUpdate两个生命周期函数中执行回调
    - 传入第二个参数后，React 会在每一次重渲染时比较这个变量的值，没变就跳过 effect
    - 回调函数中可以返回一个清除函数，这是effect可选的清除机制，相当于类组件中componentwillUnmount生命周期函数，可做一些清除副作用的操作
    - 所以， useEffect相当于componentDidMount，componentDidUpdate 和 componentWillUnmount 这三个生命周期函数的组合
- useContext
- useRef
- useReducer
- useCallback
- useMemo

# Communication between Components | 组件间の通信

https://vue3js.cn/interview/React/communication.html

由于React是单向数据流，主要思想是组件不会改变接收的数据，只会监听数据的变化，当数据发生变化时它们会使用接收到的新值，而不是去修改已有的值

因此，通信过程中，数据的存储位置都是存放在上级位置中

通信方式：

- 父组件에서子组件까지：传递参数即可
- 子组件에서父组件까지：父组件向子组件传参数，拿其值
- 兄弟组件사이：父组件作为中介
- 父组件에서后代组件까지：使用 `context`
    - `React.createContext` 以创建
    - 其下 `Provider` 组件创建数据源， `Consumer` 组件接收数据
        - 接收数据也可以用 `contextType`
- 非关系组件사이
    - `redux` 等で全局资源管理

# Myonh-De Leng